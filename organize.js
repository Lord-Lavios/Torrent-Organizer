!function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t){e.exports=require("fs")},function(e,t,r){e.exports=r(3)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,o){try{var i=t[a](o),s=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}function i(e){var t=e.shows,r=e.showsData,n=e.movies,o=e.moviesData,i=[];return Object.keys(n).map(function(e){return i.push(function(e){var t=e.file,r=e.name,n=e.moviesData,a={oldFile:t},o=w.getExt(t);".srt"===o&&(0,m.default)(t);if(!n.length)return a.newFile="/Movies/"+r+"/"+r+o,a;return n.map(function(e){var t=e.Title,n=e.Year,i=e.Runtime,s=e.Rating;new RegExp(r,"i").test(t)&&(a.newFile="/Movies/"+t+" "+n+" ("+i+") ("+s+")/"+t+" "+n+o)}),a}({name:e,file:n[e],moviesData:o}))}),Object.keys(t).map(function(e){return i=[].concat(a(i),a(function(e){var t=e.name,r=e.files,n=e.showsData,a=[];return r.map(function(e){var r=e.file,o=e.episodeNum,i=e.season,s={oldFile:r},u=w.getExt(r);".srt"===u&&(0,m.default)(r);var c=w.getEpisodeTitle({name:t,episodeNum:o,season:i,showsData:n});o=o<10?"0"+o:o;var l="/Tv Shows/"+t+"/Season "+i+"/"+t+" S"+(i<10?"0"+i:i)+"E"+o;s.newFile=c?l+" - "+c+u:l+u,a.push(s)}),a}({name:e,files:t[e].files,showsData:r})))}),i.filter(function(e){return e.newFile})}function s(e){var t=this,r=e.basePath,n=e.shows,a=e.posters,i=e.movies,s=e.moviesData;return new Promise(function(){var e=o(u.default.mark(function e(c){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.default.mkdirSync(r),["Tv Shows","Movies","No Match Found"].map(function(e){return d.default.mkdirSync(r+"/"+e)}),e.next=4,Promise.all([function(e){var t=this,r=e.shows,n=e.posters,a=e.basePath;return new Promise(function(){var e=o(u.default.mark(function e(o){var i,s,c,l,f,p,v;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=u.default.mark(function e(o){var i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r[o].season,d.default.mkdirSync(a+"/Tv Shows/"+o),!n.length){e.next=5;break}return e.next=5,h({basePath:a,showName:o,posters:n});case 5:i.map(function(e){return d.default.mkdirSync(a+"/Tv Shows/"+o+"/Season "+e)});case 6:case"end":return e.stop()}},e,t)}),s=!0,c=!1,l=void 0,e.prev=4,f=Object.keys(r)[Symbol.iterator]();case 6:if(s=(p=f.next()).done){e.next=12;break}return v=p.value,e.delegateYield(i(v),"t0",9);case 9:s=!0,e.next=6;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(4),c=!0,l=e.t1;case 18:e.prev=18,e.prev=19,!s&&f.return&&f.return();case 21:if(e.prev=21,!c){e.next=24;break}throw l;case 24:return e.finish(21);case 25:return e.finish(18);case 26:o();case 27:case"end":return e.stop()}},e,t,[[4,14,18,26],[19,,21,25]])}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return console.log("makeShowsFolders "+new Error(e))})}({shows:n,basePath:r,posters:a}),function(e,t,r){var n=this;return new Promise(function(){var a=o(u.default.mark(function a(o){var i,s,c,l,f,p,h,v,m,g,y,x,b;return u.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!r.length){a.next=29;break}i=u.default.mark(function e(r){var a,o,i,s,c,l;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(r).forEach(function(e){return"Poster"!==e?r[e]=r[e].replace(/[\|><\*:\?\"/\/]/g,""):""}),a=r.Title,o=r.Rating,i=r.Poster,s=r.Runtime,c=r.Year,l=a+" "+c+" ("+s+") ("+o+")",d.default.mkdirSync(t+"/Movies/"+l),"N/A"===i){e.next=8;break}return e.next=8,w.saveImage(i,t+"/Movies/"+l+"/"+a+".jpg");case 8:case"end":return e.stop()}},e,n)}),s=!0,c=!1,l=void 0,a.prev=5,f=r[Symbol.iterator]();case 7:if(s=(p=f.next()).done){a.next=13;break}return h=p.value,a.delegateYield(i(h),"t0",10);case 10:s=!0,a.next=7;break;case 13:a.next=19;break;case 15:a.prev=15,a.t1=a.catch(5),c=!0,l=a.t1;case 19:a.prev=19,a.prev=20,!s&&f.return&&f.return();case 22:if(a.prev=22,!c){a.next=25;break}throw l;case 25:return a.finish(22);case 26:return a.finish(19);case 27:a.next=48;break;case 29:for(v=!0,m=!1,g=void 0,a.prev=32,y=Object.keys(e)[Symbol.iterator]();!(v=(x=y.next()).done);v=!0)b=x.value,d.default.mkdirSync(t+"/Movies/"+b);a.next=40;break;case 36:a.prev=36,a.t2=a.catch(32),m=!0,g=a.t2;case 40:a.prev=40,a.prev=41,!v&&y.return&&y.return();case 43:if(a.prev=43,!m){a.next=46;break}throw g;case 46:return a.finish(43);case 47:return a.finish(40);case 48:o();case 49:case"end":return a.stop()}},a,n,[[5,15,19,27],[20,,22,26],[32,36,40,48],[41,,43,47]])}));return function(e){return a.apply(this,arguments)}}()).catch(function(e){return console.log("makeMoviesFolders "+new Error(e))})}(i,r,s)]);case 4:c();case 5:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return console.log("Make Show Folders "+new Error(e))})}var u=n(r(1)),c=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){var e=o(u.default.mark(function e(t,r){var n,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.slice(t.lastIndexOf("/")+1,t.length),a=w.getExt(t),/\.mkv|\.mp4|\.srt|\.avi/g.test(a)){e.next=5;break}return d.default.unlinkSync(t),e.abrupt("return");case 5:return e.abrupt("return",new Promise(function(e){return d.default.rename(t,r+"/No Match Found/"+n,function(){return e()})}));case 6:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),f=function(){var e=o(u.default.mark(function e(t,r){var n=this;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",new Promise(function(){var e=o(u.default.mark(function e(a){var o,i,s,c,l,f,p,h,d,v,m,g,y,x;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=[],i=!0,s=!1,c=void 0,e.prev=4,l=Object.keys(t)[Symbol.iterator]();case 6:if(i=(f=l.next()).done){e.next=22;break}return p=f.value,p=p.split(" ").join("%20"),e.next=11,w.getData("/?apikey="+r+"&t="+p);case 11:h=e.sent,d=h.Title,v=h.Year,m=h.Poster,g=h.Runtime,y=h.imdbRating,x=h.Response,o.push({Title:d,Year:v,Poster:m,Runtime:g,Rating:y,Response:x});case 19:i=!0,e.next=6;break;case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(4),s=!0,c=e.t0;case 28:e.prev=28,e.prev=29,!i&&l.return&&l.return();case 31:if(e.prev=31,!s){e.next=34;break}throw c;case 34:return e.finish(31);case 35:return e.finish(28);case 36:a(o.filter(function(e){return"True"===e.Response}));case 37:case"end":return e.stop()}},e,n,[[4,24,28,36],[29,,31,35]])}));return function(t){return e.apply(this,arguments)}}()));case 4:e.prev=4,e.t0=e.catch(0),console.log("apiMovies "),console.log(new Error(e.t0));case 8:case"end":return e.stop()}},e,this,[[0,4]])}));return function(t,r){return e.apply(this,arguments)}}(),p=function(){var e=o(u.default.mark(function e(t,r){var n=this;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",new Promise(function(){var e=o(u.default.mark(function e(a){var o,i,s,c,l,f,p,h,d,v,m,g,y,x,b,k,E,P;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=[],i=[],s=!0,c=!1,l=void 0,e.prev=4,f=Object.keys(t)[Symbol.iterator]();case 6:if(s=(p=f.next()).done){e.next=48;break}return h=p.value,d=t[h].season,h=h.replace(/[^\w\s]/gi,"").split(" ").join("%20"),v="/?apikey="+r+"&t="+h,e.next=13,w.getData(v);case 13:m=e.sent,g=m.Poster,i.push({title:h,url:g}),y=!0,x=!1,b=void 0,e.prev=19,k=d[Symbol.iterator]();case 21:if(y=(E=k.next()).done){e.next=31;break}return P=E.value,e.t0=o,e.next=26,w.getData(v+"&Season="+P);case 26:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 28:y=!0,e.next=21;break;case 31:e.next=37;break;case 33:e.prev=33,e.t2=e.catch(19),x=!0,b=e.t2;case 37:e.prev=37,e.prev=38,!y&&k.return&&k.return();case 40:if(e.prev=40,!x){e.next=43;break}throw b;case 43:return e.finish(40);case 44:return e.finish(37);case 45:s=!0,e.next=6;break;case 48:e.next=54;break;case 50:e.prev=50,e.t3=e.catch(4),c=!0,l=e.t3;case 54:e.prev=54,e.prev=55,!s&&f.return&&f.return();case 57:if(e.prev=57,!c){e.next=60;break}throw l;case 60:return e.finish(57);case 61:return e.finish(54);case 62:a([o.filter(function(e){return"True"===e.Response}),i.filter(function(e){var t=e.url,r=e.title;return t&&r})]);case 63:case"end":return e.stop()}},e,n,[[4,50,54,62],[19,33,37,45],[38,,40,44],[55,,57,61]])}));return function(t){return e.apply(this,arguments)}}()));case 4:e.prev=4,e.t0=e.catch(0),console.log("apiMovies "),console.log(new Error(e.t0));case 8:case"end":return e.stop()}},e,this,[[0,4]])}));return function(t,r){return e.apply(this,arguments)}}(),h=function(){var e=o(u.default.mark(function e(t){var r,n,a,o,i,s,c,l,f=t.basePath,p=t.posters,h=t.showName;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=!0,n=!1,a=void 0,e.prev=4,o=p[Symbol.iterator]();case 6:if(r=(i=o.next()).done){e.next=20;break}if(s=i.value,c=s.title,l=s.url,(c=c.replace(/%20/g,"").toLowerCase())!==h.replace(/\s/gi,"").toLowerCase()){e.next=16;break}return e.next=14,w.saveImage(l,f+"/Tv Shows/"+h+"/"+h+".jpg");case 14:e.next=17;break;case 16:case 17:r=!0,e.next=6;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(4),n=!0,a=e.t0;case 26:e.prev=26,e.prev=27,!r&&o.return&&o.return();case 29:if(e.prev=29,!n){e.next=32;break}throw a;case 32:return e.finish(29);case 33:return e.finish(26);case 34:e.next=39;break;case 36:e.prev=36,e.t1=e.catch(0),console.log("savePosters "+new Error(e.t1));case 39:case"end":return e.stop()}},e,this,[[0,36],[4,22,26,34],[27,,29,33]])}));return function(t){return e.apply(this,arguments)}}(),d=n(r(0)),v=n(r(5)),m=n(r(8)),g=n(r(9)),y=n(r(10)),w=(0,v.default)(),x=(0,g.default)(w);o(u.default.mark(function e(){var t,r,n,a,h,v,m,g,b,k,E,P,S,O,j,F,_,L=this;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,y.default)();case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return");case 6:if(r=t.path,console.time("It took"),console.log("Organizing "+r),console.log("Reading Files..."),n=x.readFiles(r),console.log("Filtering Files into video, directories and other files"),a=function(e){var t=[],r=[],n=[];return e.map(function(e){if(w.isDir(e))t.push(e);else{var a=w.isMatch(e),o=a.episodePatt,i=void 0===o?null:o,s=a.type,u=a.name,c=void 0===u?null:u;if(/Sample/gi.test(e))n.push(e);else{var l="tv"===s?w.getFileStats({file:e,episodePatt:i}):null;s&&/\.mkv|\.mp4|\.srt|\.avi/gi.test(e)&&r.push({file:e,type:s,fileStats:l,name:c}),n.push(e)}}}),{dirs:t.sort(function(e,t){return t.length-e.length}),video:r,other:n}}(n),h=a.dirs,v=a.video,m=a.other,console.log("Filtering movies and tv shows files"),g=function(e){var t={},r={};return e.map(function(e){var n=e.file,a=e.type,o=e.fileStats,i=e.name;if(i&&(i=i.replace(/\(\s*[^)]*\)/g,"").replace(/\[\s*[^\]]*\]/g,"").replace(/\/\\/g,"").trim()),"movie"===a){if(!i)return;return i=w.capitalize(i),r[i]?"":r[i]=n}var s=o.name,u=o.season,c=o.episodeNum;if(s){s=w.capitalize(s);var l=w.sameShow(t,s,u);l?(t[l.name]&&t[l.name].hasOwnProperty("files")&&t[l.name].files.push({file:n,episodeNum:c,season:u}),l.newSeason&&(t[l.name].season.push(u),t[l.name].length+=1)):t[s]={season:[u],length:1,files:[{file:n,episodeNum:c,season:u}]}}}),[t,r]}(v),b=c(g,2),k=b[0],E=b[1],P={},S={},O={},!t.apiKey){e.next=26;break}return console.log("Getting shows and movies data from OmdbAPI.com"),e.next=20,function(e,t,r){var n=this;try{return new Promise(function(){var a=o(u.default.mark(function a(o){var i,s,l,h,d;return u.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p(e,r);case 2:return i=n.sent,s=c(i,2),l=s[0],h=s[1],n.next=8,f(t,r);case 8:d=n.sent,o([l,h,d]);case 10:case"end":return n.stop()}},a,n)}));return function(e){return a.apply(this,arguments)}}())}catch(e){console.log("Execute API "+new Error(e))}}(k,E,t.apiKey);case 20:j=e.sent,F=c(j,3),P=F[0],S=F[1],O=F[2],k=w.replaceNameWithApiName({showsAndMovies:[k,E],showsData:P});case 26:return console.log("Making new folders for movies and tv shows"),r+=w.generateRandomFolderName(),e.next=30,s({basePath:r,shows:k,posters:S,movies:E,moviesData:O});case 30:if(console.log("Finding new names for movies and tv shows"),_=i({shows:k,showsData:P,movies:E,moviesData:O}),0!==t.mode){e.next=37;break}console.log("Creating Hardlinks"),_.map(function(e){var t=e.oldFile,n=e.newFile;return d.default.link(t,r+n,function(e){return e?console.log(e):""})}),e.next=49;break;case 37:if(1!==t.mode){e.next=42;break}console.log("Creating Symlinks"),_.map(function(e){var t=e.oldFile,n=e.newFile;return d.default.symlink(t,r+n,function(e){return e?console.log(e):""})}),e.next=49;break;case 42:if(2!==t.mode){e.next=49;break}return console.log("Renaming Files"),_.map(function(e){var t=e.oldFile,n=e.newFile;return d.default.rename(t,r+n,function(e){return e?console.log(e):""})}),e.next=47,Promise.all(m.map(function(){var e=o(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,L)}));return function(t){return e.apply(this,arguments)}}()));case 47:console.log("Deleting uneccesary files"),function(e){try{e.map(function(e){return d.default.rmdirSync(e)})}catch(e){console.log("Remove Dirs Error: "+new Error(e))}}(h);case 49:console.log("Your organized files are in - "+r),console.timeEnd("It took"),e.next=56;break;case 53:e.prev=53,e.t0=e.catch(0),console.log("Organize "+new Error(e.t0));case 56:case"end":return e.stop()}},e,this,[[0,53]])}))()},function(e,t,r){var n=function(){return this}()||Function("return this")(),a=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=a&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=r(4),a)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";function r(e,t,r,o){var i=t&&t.prototype instanceof a?t:a,s=Object.create(i.prototype),u=new p(o||[]);return s._invoke=function(e,t,r){var a=P;return function(o,i){if(a===O)throw new Error("Generator is already running");if(a===j){if("throw"===o)throw i;return d()}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var u=c(s,r);if(u){if(u===F)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===P)throw a=j,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=O;var l=n(e,t,r);if("normal"===l.type){if(a=r.done?j:S,l.arg===F)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=j,r.method="throw",r.arg=l.arg)}}}(e,r,u),s}function n(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function a(){}function o(){}function i(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){function t(r,a,o,i){var s=n(e[r],e,a);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&g.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,o,i)},function(e){t("throw",e,o,i)}):Promise.resolve(c).then(function(e){u.value=e,o(u)},i)}i(s.arg)}var r;this._invoke=function(e,n){function a(){return new Promise(function(r,a){t(e,n,r,a)})}return r=r?r.then(a,a):a()}}function c(e,t){var r=e.iterator[t.method];if(r===v){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=v,c(e,t),"throw"===t.method))return F;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return F}var a=n(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,F;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=v),t.delegate=null,F):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,F)}function l(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(l,this),this.reset(!0)}function h(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(g.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=v,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:v,done:!0}}var v,m=Object.prototype,g=m.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},w=y.iterator||"@@iterator",x=y.asyncIterator||"@@asyncIterator",b=y.toStringTag||"@@toStringTag",k="object"==typeof e,E=t.regeneratorRuntime;if(E)k&&(e.exports=E);else{(E=t.regeneratorRuntime=k?e.exports:{}).wrap=r;var P="suspendedStart",S="suspendedYield",O="executing",j="completed",F={},_={};_[w]=function(){return this};var L=Object.getPrototypeOf,M=L&&L(L(h([])));M&&M!==m&&g.call(M,w)&&(_=M);var R=i.prototype=a.prototype=Object.create(_);o.prototype=R.constructor=i,i.constructor=o,i[b]=o.displayName="GeneratorFunction",E.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},E.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,b in e||(e[b]="GeneratorFunction")),e.prototype=Object.create(R),e},E.awrap=function(e){return{__await:e}},s(u.prototype),u.prototype[x]=function(){return this},E.AsyncIterator=u,E.async=function(e,t,n,a){var o=new u(r(e,t,n,a));return E.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},s(R),R[b]="Generator",R[w]=function(){return this},R.toString=function(){return"[object Generator]"},E.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},E.values=h,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=v),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],o=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var i=g.call(a,"catchLoc"),s=g.call(a,"finallyLoc");if(i&&s){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&g.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,F):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),F},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),f(r),F}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;f(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=v),F}}}}(function(){return this}()||Function("return this")())},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.default=function(){return new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,[{key:"isDir",value:function(e){return!!i.default.statSync(e).isDirectory()}},{key:"disectArrayAndPush",value:function(e,t,r){return t.map(function(t){return r.push(e+t)}),r}},{key:"capitalize",value:function(e){return e.split(" ").map(function(e){return e[0].toUpperCase()+e.slice(1,e.length)}).join(" ")}},{key:"isMatch",value:function(e){for(var t=Object.keys(s.default),r=0;r<t.length;r+=1){var n=s.default[t[r]](e);if(n)return n}return{response:!1}}},{key:"getExt",value:function(e){return e.slice(e.length-4,e.length)}},{key:"sameShow",value:function(e,t,r){for(var n in e)if(new RegExp(t+"$","i").test(n))return-1===e[n].season.indexOf(r)?{newSeason:!0,name:n}:{newSeason:null,name:n};return!1}},{key:"saveImage",value:function(e,t){return new Promise(function(r){var n=i.default.createWriteStream(t);u.default.get(e,function(e){e.pipe(n),r()})}).catch(function(e){return console.log(e)})}},{key:"getData",value:function(e){return new Promise(function(t){var r={host:"www.omdbapi.com",path:e,method:"GET",headers:{"Content-Type":"application/json"}};setTimeout(function(){u.default.request(r).on("response",function(e){var r="";e.setEncoding("utf8"),e.on("data",function(e){return r+=e}),e.on("end",function(){return t(JSON.parse(r))}),e.on("error",function(e){return console.error(e)})}).end()},100)}).catch(function(e){return console.log("getData "+new Error(e))})}},{key:"replaceNameWithApiName",value:function(e){var t=a(e.showsAndMovies,1)[0],r=e.showsData,n={};return Object.keys(t).forEach(function(e){var a=function(e,t){var r=void 0;return t.forEach(function(t){var n=t.Title,a=e.split(" "),o=0;a.forEach(function(e){return new RegExp(e,"gi").test(n)?o+=1:""}),o===a.length&&(r=n)}),r}(e,r);a?n[a]=t[e]:n[e]=t[e]}),n}},{key:"getEpisodeTitle",value:function(e){var t=e.name,r=e.episodeNum,n=e.season,a=e.showsData,o="";return a.length?(a.forEach(function(e){new RegExp(t,"i").test(e.Title)&&parseInt(e.Season,10)===parseInt(n,10)&&e.Episodes.forEach(function(e){var t=e.Episode,n=e.Title;return parseInt(r,10)===parseInt(t,10)?o=n:""})}),o?o.replace(/[^\w\s-\.$]/gi,""):null):null}},{key:"getFileStats",value:function(e){var t=e.file,r=e.episodePatt;t=t.slice(t.lastIndexOf("/")+1,t.length).replace(/[.]/g," ");var n=/e/gi.exec(r)?{patt:/e/gi.exec(r).index,match:"e"}:{patt:/x/gi.exec(r).index,match:"x"},a="e"===n.match?r.slice(1,n.patt):r.slice(0,n.patt),o=t.slice(0,t.indexOf(r)-1).replace(/\(\s*[^)]*\)/g,"").replace(/\[\s*[^\]]*\]/g,"").replace(/\/\\/g,"").replace(/[^\w\s\.$]/gi,"").trim(),i=r.slice(n.patt+1,r.length);return{season:parseInt(a),name:o,episodeNum:parseInt(i)}}},{key:"generateRandomFolderName",value:function(){for(var e=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t=[],r=0;r<6;r+=1){var n=e[Math.floor(Math.random()*e.length)];Math.random()<.699&&(n=n.toLowerCase()),t.push(n)}return t.join("")}}]),e}())};var i=n(r(0)),s=n(r(6)),u=n(r(7))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={seasonPatt:function(e){e=e.slice(e.lastIndexOf("/")+1,e.length).replace(/[.]/g," ");var t=/S\d+E\d+/gi.exec(e);return!!t&&{episodePatt:t[0],type:"tv"}},seasonXEpiNamePatt:function(e){e=e.slice(e.lastIndexOf("/")+1,e.length).replace(/[.]/g," ");var t=/\d+x\d\d/gi.exec(e);return!!t&&(t=t[0],{episodePatt:t,type:"tv"})},ifMovie:function(e){e=e.slice(e.lastIndexOf("/")+1,e.length).replace(/[.]/g," ");var t=/20\d+|19\d+/gi.exec(e);return!!t&&(t=e.slice(0,t.index).replace(/\./g," ").trim(),{name:t,type:"movie"})}}},function(e,t){e.exports=require("https")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.replace(/\.srt/g,".txt");n.default.renameSync(e,t);var r=n.default.readFileSync(t,"utf-8").replace(/\(\s*[^)]*\)/g,"").replace(/\[\s*[^\]]*\]/g,"").replace(/[^A-Za-z\d\s!?,''><.:-]/gi,"");n.default.unlinkSync(t),n.default.writeFileSync(e,r,"utf-8")};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(0))},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.default=function(e){function t(r){var n=r.basePath,a=r.deeperDir,i=r.arr;n+=a+"/",a=o.default.readdirSync(n),i=e.disectArrayAndPush(n,a,i);for(var s=0;s<a.length;s+=1)e.isDir(n+a[s])&&t({basePath:n,deeperDir:a[s],arr:i});return i}return new(function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r)}return a(r,[{key:"readFiles",value:function(r){var a=[];return o.default.readdirSync(r).map(function(o){a.push(r+o),e.isDir(r+o)&&(a=[].concat(n(a),n(t({basePath:r,deeperDir:o,arr:[]}))))}),a}}]),r}())};var o=function(e){return e&&e.__esModule?e:{default:e}}(r(0))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(1));t.default=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,o){try{var i=t[a](o),s=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}(n.default.mark(function e(){var t,r,a,o,i,s;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="\t",r={help:"\nUsage: node organize <path> --api=<apikey|false> --mode=<mode>\n\n<path>"+t+"Location for where to look for files to organize\n\n<apikey>"+t+"api key from ombdapi.com; Defaults to false\n\n<mode>"+t+'Specify mode: "symlink", "hardlink", "nolink"; "hardlink" by default;\n\n'+t+"symlink: It creates shortcut of the files with formatted names instead of renaming\n"+t+t+" the original files.\n\n"+t+"hardlink: It creates new files with formatted names without taking extra space.\n"+t+t+"  If the original files are deleted, hard linked files will take the space.\n"+t+t+"  Basically duplicates of files without taking extra space.\n"+t+t+"  Recommended to use on torrents that are being seeded.\n\n"+t+"nolink: This renames the files and deletes the unnecessary files.\n"+t+t+"This will stop seeding.\n\n--help"+t+"show information about the options"},(a=process.argv.slice(2,process.argv.length)).length&&"--help"!==a[0]&&!(a.length>3)){e.next=6;break}return console.log(r.help),e.abrupt("return",!1);case 6:if(o="/"!==a[0][a.length-1]?a[0]+"/":a[0],o=o.replace(/\\/g,"/"),i=!1,s="--mode=hardlink",a.forEach(function(e){/mode/.test(e)&&(s=e),/api/.test(e)&&(i=e.slice(e.indexOf("=")+1,e.length))}),"--mode=hardlink"!==s){e.next=15;break}return e.abrupt("return",{mode:0,path:o,apiKey:i});case 15:if("--mode=symlink"!==s){e.next=19;break}return e.abrupt("return",{mode:1,path:o,apiKey:i});case 19:return e.abrupt("return",{mode:2,path:o,apiKey:i});case 20:case"end":return e.stop()}},e,this)}))}]);